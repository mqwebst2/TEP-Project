import"../modulepreload-polyfill.c7c6310f.js";class a extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),s=document.querySelector("#comment-template").content.cloneNode(!0);t.append(s),this.name=this.shadowRoot.querySelector(".comment-title__name"),this.email=this.shadowRoot.querySelector(".comment-title__email"),this.message=this.shadowRoot.querySelector(".comment-body__message"),this.time=this.shadowRoot.querySelector(".comment-body__time")}static get observedAttributes(){return["name","email","message","time"]}attributeChangedCallback(t,s,e){s!==e&&this[`${t}`]&&(this[`${t}`].textContent=e)}}customElements.get("custom-comment")===void 0&&customElements.define("custom-comment",a);class l{constructor(t={}){const s=this;this.subscribers=[],this.state=new Proxy(t,{set(e,c,i){e[c]=i;for(const u of s.subscribers)u(e);return!0}})}subscribe(t){if(typeof t!="function")throw new Error("You must subscribe with a function.");this.subscribers.push(t),t(this.state)}addComment(t){t.date||(t.date=new Date().toLocaleString()),this.state.commentList.push(t),this.state.commentList=this.state.commentList}}const m=new l({commentList:[]}),d=document.querySelectorAll("[required]"),n=document.querySelector("#form"),r=document.querySelector("#output");for(const o of d)o.closest(".form-item").querySelector("label").classList.add("required");n.addEventListener("submit",o=>{o.preventDefault();const t=Object.fromEntries(new FormData(n).entries());console.log(t),m.addComment(t),o.target.reset(),o.target.querySelector("input").focus()});m.subscribe(o=>{const t=o.commentList;console.log(t),r.innerHTML="";for(const s of t){const e=document.createElement("custom-comment");e.setAttribute("name",s.name),e.setAttribute("email",s.email),e.setAttribute("message",s.comment),e.setAttribute("time",s.date),r.append(e)}});
